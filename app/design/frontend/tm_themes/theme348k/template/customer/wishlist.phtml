<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2006-2017 X.commerce, Inc. and affiliates (http://www.magento.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

/**
 * @deprecated  after 1.4.0.0-alpha3
 */
$wishlist = Mage::getModel('wishlist/wishlist')->loadByCustomer(Mage::getSingleton('customer/session')->getCustomer(),true)->getItemCollection();
?>
<div class="row my-wishlist">
<div class="account-title">
    <h1><?php echo $this->__('Wishlist') ?></h1>
</div>
<?php if($wishlist->getSize()): ?>
<form action="<?php echo $this->getUrl('wishlist/index/remove/item/') ?>" method="get" id="wishlistForm">
    <?php foreach($wishlist as $item): ?>
        <div class="row item">
            <div class="col-lg-1 col-md-1 col-xs-1">
            	<span class="remove" data-itemid="<?php echo $this->getItemRemoveUrl($item); ?>">x</span>
            </div>
            <div class="col-lg-3 col-md-3 col-xs-2">
            	<img src="<?php echo $this->helper('catalog/image')->init($item->getProduct(), 'thumbnail')?>" />
            </div>            
            <div class="col-lg-3 col-md-3 col-xs-3">
                <a href="<?php echo $this->getUrl('catalog/product/view/id/'.$item->getProduct()->getId()) ?>"><?php echo $this->escapeHtml($item->getProduct()->getName()) ?></a>
            </div>
            <div class="col-lg-2 col-md-3 col-xs-3"><span><?php echo number_format($item->getPrice(),2) ?>€</span></div>
            <div class="col-lg-3 col-md-3 col-xs-3">
            	<a href="<?php echo $item->getProduct()->getProductUrl()?>" class="ver-producto"> <?php echo $this->__('Ver Producto')?> </a>
            </div>
        </div>
    <?php endforeach ?>

    <!--<div class="buttons-set">
        <a href="<?php //echo Mage::getBaseUrl() ?>">&laquo; <?php //echo $this->__('Continue Shopping') ?></a>
        <input type="submit" value="<?php //echo Mage::helper('core')->quoteEscape($this->__('Update')) ?>" class="input-button" name="do" />
    </div>-->
    <input type="checkbox" value="1" name="" id="input" class="checkbox" style="display: none;" />
</form>
<?php else: ?>
    <p><?php echo $this->__('You have placed no products yet.') ?></p>
    <div class="buttons-set">
        <p class="back-link"><a href="<?php echo $this->getUrl('customer/account') ?>"><small>&laquo; </small><?php echo $this->__('Back - link to the previously viewed page') ?></a></p>
    </div>
<?php endif ?>
</div>
<script type="text/javascript">
	//Eliminar item de Wishlist desde botón X
	jQuery(document).ready(function(){
		jQuery(".my-wishlist .remove").on('click', function(){
			var id = jQuery(this).attr('data-itemid');
			console.log(jQuery(this));
			location.href =jQuery("#wishlistForm").attr('action')+id+"/";
		});

	});
</script>